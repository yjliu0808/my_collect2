
<!-- saved from url=(0091)http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/PERFORMENCEPROJECT/DAY01/CASE/01/index.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>CASE</title>
    
    <script type="text/javascript" src="./TEST PERFORMENCEPROJECT DAY01_w_files/jquery.min.js">
    </script>
    <script type="text/javascript" src="./TEST PERFORMENCEPROJECT DAY01_w_files/jquery.snippet.js">
    </script>
    <script type="text/javascript" src="./TEST PERFORMENCEPROJECT DAY01_w_files/main.js">
    </script>
    <link type="text/css" href="./TEST PERFORMENCEPROJECT DAY01_w_files/index.css" rel="Stylesheet">
    <link type="text/css" href="./TEST PERFORMENCEPROJECT DAY01_w_files/jquery.snippet.css" rel="Stylesheet">
  </head>
  <body>
    <div class="source_style_case">
      <a name="page_top_case" id="top_anchor">
      </a><a id="link_top" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/PERFORMENCEPROJECT/DAY01/CASE/01/index.html#page_top_case">Top</a>
      <h1>TEST PERFORMENCEPROJECT DAY01</h1>
      <ol class="index">
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/PERFORMENCEPROJECT/DAY01/CASE/01/index.html#case1">编写性能测试计划</a>
        </li>
      </ol>
      <a name="case1">
      </a>
      <h2>1 编写性能测试计划</h2>
      <h3>1.1 问题</h3>
      <p>编写稿件管理系统性能测试计划。</p>
      <h3>1.2 方案</h3>
      <p>根据稿件管理系统用户手册文档进行编写。</p>
      <h3>1.3 步骤</h3>
      <p class="number">1、文档介绍</p>
      <p>1.1文档目的</p>
      <p>说明测试方案中所涉及内容的简单介绍，包含：编写目的、项目背景、参考文档、测试点选取，场景设计等…</p>
      <p>1.2参考文献</p>
      <p>《网站稿件管理发布系统软件需求规格说明书》</p>
      <p>1.3编写目的</p>
      <p>从文档描述网站稿件管理发布系统性能测试的范围、方法、资源、进度，作为网站稿件管理发布系统性能测试的依据，该文档的目的主要有：</p>
      <p>1明确测试范围、测试对象;</p>
      <p>2明确测试目标;</p>
      <p>3明确测试环境需求，包括：测试需要的软、硬件环境以及测试人力需求;</p>
      <p>4确定测试方案，测试的方法和步骤;</p>
      <p>5指定测试工作的时间安排;</p>
      <p>6分析测试的风险，寻找规避办法;</p>
      <p>7确定测试需求输出的结果和结果表现形式。</p>
      <p class="number">2、软件概述</p>
      <p>2.1项目介绍</p>
      <p>系统特点:</p>
      <p>1本系统是一个网站稿件管理发布系统，包括稿件管理和文档上传下载两个主要功能模块。</p>
      <p>2网站编辑用户可以提交稿件，稿件经过批准后可以在网站上发布。</p>
      <p>3查询稿件可以执行标题检索、全文检索等。</p>
      <p>4文档上传下载功能可以管理和共享Word文档。</p>
      <p>2.2运行环境</p>
      <p class="number">服务器设备：</p>
      <p>1CPU主频1GHz以上，内存1GB以上，硬盘自由空间1GB以上。</p>
      <p class="number">支持软件：</p>
      <p>1操作系统：Windows2003 Server或Windows XP</p>
      <p>2数据库服务器：MySQL-5.1.28</p>
      <p>3应用服务器：Tomcat6.0</p>
      <p>4Java：JDK1.6.0_07</p>
      <p>5应用软件：Liferay Portal 5.1.1</p>
      <p>6浏览器：IE6+sp2</p>
      <p>7Word：office 2000或office XP或office 2003</p>
      <p>2.3项目流程，如下图-1所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image001.png">
        <p>图-1</p>
      </div>
      <p class="number">3、测试资源</p>
      <p>3.1软硬件配置</p>
      <p>性能测试环境（包括测试工具环境）的硬件和软件配置如下图-2和图-3所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image002.png">
        <p>图-2</p>
      </div>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image003.png">
        <p>图-3</p>
      </div>
      <p>3.2测试工具，如下图-4所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image004.png">
        <p>图-4</p>
      </div>
      <p>3.3人力需求，如下图-5和图-6所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image005.png">
        <p>图-5</p>
      </div>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image006.png">
        <p>图-6</p>
      </div>
      <p>3.4测试数据，如下图-7所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image007.png">
        <p>图-7</p>
      </div>
      <p class="number">4、交付物，如下表图-8所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image008.png">
        <p>图-8</p>
      </div>
      <p class="number">5、测试进度计划</p>
      <p>在测试工作量估算数据的基础上，考虑现有的资源情况，对资源进行具体安排，根据项目整体进度计划，列出进度表，即是谁在什么时间内完成什么任务，如下图-9所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image009.png">
        <p>图-9</p>
      </div>
      <p class="number">6、测试启动/结束/暂停/再启动/退出准则</p>
      <p>6.1暂停准则：</p>
      <p>核心系统和前置系统应用软件通过系统功能测试；</p>
      <p>测试环境已经准备完毕，包括：</p>
      <p>1、核心系统和前置系统应用系统已安装完毕;</p>
      <p>2、基础数据以及测试数据已经导入核心系统主机数据库;</p>
      <p>3、LoadRunner压力产生器及控制台机器已经准备完毕;</p>
      <p>4、测试工具LoadRunner及所需要的License已准备好;</p>
      <p>5、测试脚本、测试场景已经准备完毕;</p>
      <p>6、以上条件，必须全部满足才能开始性能测试执行。</p>
      <p>6.2暂停/再启动的准则</p>
      <p>6.2.1暂停准则：</p>
      <p>1测试汇总发现问题，需要网站稿件管理发布系统修改代码，或者需要更换应用服务器</p>
      <p>测试环境受到干扰，比如服务器被临时征用，或服务器的其他使用会对测试结果造成干扰。</p>
      <p>6.2.2再启动准则</p>
      <p>测试中发现问题得以解决；</p>
      <p>测试环境恢复正常。</p>
      <p>6.3测试退出准则</p>
      <p>满足下列条件之一时，可以结束性能测试执行：</p>
      <p>压到预定最大并发用户数，系统性能能够满足预期测试指标要求；</p>
      <p>到计划结束日期，压到预定最大并发用户数，经过系统调优，系统性能仍然无法满足预期测试指标要求，但已经无法再实施调优。</p>
      <p class="number">7、性能测试目标要求</p>
      <p>7.1性能测试指标</p>
      <p>本次性能测试需要测试的性能指标包括：</p>
      <p>1、交易响应时间：核心系统处理交易的平均响应时间；</p>
      <p>2、交易吞吐量：后台主机每秒能够处理的交易笔数（TPS）；</p>
      <p>3、并发交易成功率；</p>
      <p>4、批处理效率；</p>
      <p>5、资源使用指标：前置和核心系统各服务器CPU占用率、内存占用率、I/O占用率；LoadRunner压力产生器CPU占用率、内存占用率。</p>
      <p>7.2交易响应时间</p>
      <p>本次性能测试中的交易响应时间是指在一定的负载压力下，由前置系统记录和进行统计分析的、核心系统处理交易的响应时间，用一定时间段内的统计平均值ART来表示。</p>
      <p>本次性能测试中，对所有非批量联机交易的ART指标要求为：</p>
      <p>ART ≤ 5秒。</p>
      <p>7.3交易吞吐量</p>
      <p>根据统计数据，网站稿件管理核心系统当前生产环境高峰日交易总量为7500笔。根据二八原则（80%的交易量发生在20%的时间段内），当前生产环境对主机的交易吞吐量指标要求为：</p>
      <p>TPS_1 ≥ 10000(交易) * 80%(交易量) / (24(小时) * 20% * 3600(1小时60分钟*1分钟60秒)) = 0.34 笔/秒  17280</p>
      <p>根据规划，网站稿件管理系统未来1年内核心系统的处理能力应达到高峰日交易总量10000笔，则3年后对主机的交易吞吐量指标要求为：</p>
      <p>TPS_2 ≥ 10000 * 80% / (24 * 20% * 3600) = 0.46 笔/秒</p>
      <p>为获取核心系统主机的最大处理能力，在本次性能测试中可通过不断加压，让核心系统主机CPU利用率达到85%，记录此时的TPS值，作为新主机处理能力的一个参考值。</p>
      <p>为模拟生产上核心主机的异常情况，通过不断加压，让核心系统主机CPU利用率达到接近100%，观察核心系统的工作情况，记录TPS值。</p>
      <p>7.4并发交易成功率</p>
      <p>指测试结束时成功交易数占总交易数的比率。交易成功率越高，系统越稳定。</p>
      <p>对典型交易的场景测试，要求其并发交易成功率 ≥ 99% 。</p>
      <p>7.5资源使用指标</p>
      <p>在正常的并发测试和批处理测试中，核心系统各服务器主机的资源使用指标要求：</p>
      <p>CPU使用率 ≤ 80%</p>
      <p>内存使用率 ≤ 80%</p>
      <p>I/O使用率 ≤80%</p>
      <p class="number">8、测试策略</p>
      <p>8.1基准测试</p>
      <p>在测试环境经过确认，脚本预验证之后对本次测试涉及的全部联机交易做基准测试。目的是验证测试脚本及后台环境、初步检查交易本身是否存在性能缺陷。</p>
      <p>目的：是获取单用户执行时的各项性能指标，为多用户并发和混合场景的性能测试分析提供参考依据；</p>
      <p>8.2并发测试</p>
      <p>并发测试是指并发不同数目的虚拟用户执行检查点操作，目的是对检查点进行压力加载测试。预测系统投入使用后在一定用户压力情况下的系统响应时间,根据此响应时间分析、确定系统存在的性能瓶颈，为系统的优化和调整提供依据。</p>
      <p>8.3递增测试</p>
      <p>递增测试是指每隔一定时间段（如5秒、10秒）并发不同数目的虚拟用户执行检查点操作，对检查点进行递增用户压力加载测试，从而模拟系统真实的使用情景，使用户预知系统投入使用后的性能水平。</p>
      <p>8.4综合场景测试</p>
      <p>通过对系统体系机构和功能模块的分析以及对系统用户的分布和使用频率的分析，来构造系统综合场景的测试模型，模拟不同用户执行不同操作，如10%的用户执行登录操作，50%的用户执行查询操作，40%的用户执行上传文档操作，最大限度地模拟系统的真实场景，使用户预知系统投入使用后的真实性能水平。从而，对系统做出相应的优化及调整，避免实际情况中出现系统长时间不响应及崩溃的情况。</p>
      <p>8.5疲劳强度测试</p>
      <p>疲劳强度测试是指对系统核心功能点进行疲劳强度测试，即用系统稳定运行情况下能够支持的最大并发用户数，持续执行一段业务时间（如48小时），记录交易平均响应时间，交易正确率，应用服务器和数据库服务器CPU利用率、内存使用情况等参数，考察应用服务器和数据库服务器是否出现宕机、内存泄漏等情况。该测试通常需要和场景测试进行结合，从而可以最大限度地模拟真实环境下，系统长时间连续运行条件下，系统是否能够保持在稳定运行状态。</p>
      <p class="number">9、测试用例开发</p>
      <p>根据测试范围规定的内容，逐条设计测试需求及完成该测试需求的测试过程、测试条件，构造本次测试的测试用例，编写决策树，如下图-10至图-13所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image010.png">
        <p>图-10</p>
      </div>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image011.png">
        <p>图-11</p>
      </div>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image012.png">
        <p>图-12</p>
      </div>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image013.png">
        <p>图-13</p>
      </div>
      <p class="number">10、交易基准测试</p>
      <p>10.1测试方法</p>
      <p>使用一个Vuser，分别运行每个交易的脚本，设置脚本的迭代次数1次，验证所有脚本是否运行正确、所有交易事务是否成功返回，并获取每个交易的平均交易响应时间ATR(Average Transaction Response Time)。</p>
      <p>10.2测试场景，如下图-14所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image014.png">
        <p>图-14</p>
      </div>
      <p class="number">11、交易并发测试</p>
      <p>11.1测试方法</p>
      <p>使用10个Vuser，分别为每个交易执行并发，验证所有脚本是否运行正确、所有交易事务是否成功返回，并获取每个交易的平均交易响应时间ATR(Average Transaction Response Time)。</p>
      <p>11.2测试综合场景，如下图-15所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image015.png">
        <p>图-15</p>
      </div>
      <p>11.3测试方法</p>
      <p>使用20个Vuser，分别为每个交易执行并发，验证所有脚本是否运行正确、所有交易事务是否成功返回，并获取每个交易的平均交易响应时间ATR(Average Transaction Response Time)。</p>
      <p>11.4测试场景，如下图-16所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image016.png">
        <p>图-16</p>
      </div>
      <p class="number">12、混合交易负载场景</p>
      <p>制作单个交易的性能测试脚本，将同一模块内功能相近的脚本放在同一个测试场景中，并发用户数为50，平均设定每个交易的比例，设定负载序列，按照负载序列逐渐增加并发用户数，如下图-17和图-18所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image017.png">
        <p>图-17</p>
      </div>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image018.png">
        <p>图-18</p>
      </div>
      <p class="number">13、疲劳强度测试</p>
      <p>使用50用户系统稳定运行的情况下，以一定的负载压力来长时间运行系统的测试，主要目的是确定被测系统系统长时间处理较大业务量时的性能，获取响应时间和服务器各项资源，如下图-19所示：</p>
      <div class="image">
        <img src="./TEST PERFORMENCEPROJECT DAY01_w_files/image019.png">
        <p>图-19</p>
      </div>
    </div>
  
</body></html>