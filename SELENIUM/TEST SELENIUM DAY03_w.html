
<!-- saved from url=(0081)http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>CASE</title>
    
    <script type="text/javascript" src="./TEST SELENIUM DAY03_w_files/jquery.min.js">
    </script>
    <script type="text/javascript" src="./TEST SELENIUM DAY03_w_files/jquery.snippet.js">
    </script>
    <script type="text/javascript" src="./TEST SELENIUM DAY03_w_files/main.js">
    </script>
    <link type="text/css" href="./TEST SELENIUM DAY03_w_files/index.css" rel="Stylesheet">
    <link type="text/css" href="./TEST SELENIUM DAY03_w_files/jquery.snippet.css" rel="Stylesheet">
  </head>
  <body>
    <div class="source_style_case">
      <a name="page_top_case" id="top_anchor">
      </a><a id="link_top" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#page_top_case">Top</a>
      <h1>TEST SELENIUM DAY03</h1>
      <ol class="index">
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#case1">WebDriver安装和初步使用</a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#case2">Firefox测试留言簿</a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#case3">Firefox留言簿测试2个用户</a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#case4">留言簿测试套件</a>
        </li>
      </ol>
      <a name="case1">
      </a>
      <h2>1 WebDriver安装和初步使用</h2>
      <h3>1.1 问题</h3>
      <p>安装WebDrvier以及使用WebDriver对FireFox浏览器进行启动和关闭。</p>
      <p>因此，本案例要求安装配置WebDriver及其Java环境,并且使用Java语言实现WebDriver自动启动浏览器关闭浏览器的自动化代码。</p>
      <h3>1.2 方案</h3>
      <p>首先，安装Java环境，并且配置path和classpath环境变量，再安装eclipse。</p>
      <p>其次，Selenium WebDriver支持多种编程语言的绑定并且每种语言都有自己的客户端驱动，讲解以Java为编程语言的范例，所以需要下载WebDriver Java Client Driver，官网：</p>
      <p>http://docs.seleniumhq.org/download；</p>
      <p>由于客户端版本的更新较快，用户可根据需要下载相应的版本（以selenium-java-2.33.0为例）；</p>
      <p>下载的驱动为zip包格式，解压后包含libs文件夹、两个jar包、一个CHANGELOG文件。</p>
      <p>新建一个Java项目，在项目中引入WebDriver Java Client Driver的Jar包文件，由于FireFox Driver是直接打包在WebDriver Java Client Driver中，因此只要按照上述步骤成功下载部署了WebDriver Java Client Driver，就不需要再另外下载FireFox Driver。</p>
      <p>新建一个package和一个Class，在main 方法中，打开FireFox浏览器，并调用关闭方法关闭浏览器。</p>
      <p>由此可见，基于Java的WebDriver的部署实际上就是部署Java开发环境，同时引入WebDriver的Jar包即可。</p>
      <h3>1.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：安装Java环境</p>
      <p>首先安装JDK，下载地址如下：http://www.oracle.com/technetwork/java/javase/downloads/index.html，配置path和classpath环境变量；</p>
      <p>其次下载eclipse，下载地址如下：http://www.eclipse.org/downloads，安装eclipse，配置eclipse工作目录等；</p>
      <p class="number">步骤二：新建java Project，新建package，新建Class</p>
      <p>新建Project1的Java Project，新建day03的package，在该包下新建名称为Firefox_Test的Class，注意勾选public static void main(String[] args)的复选框来自动创建main方法。生成的代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> Firefox_Test <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * </span><span class="sh_type">@param</span><span class="sh_comment"> args</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_keyword">static</span> void <span class="sh_function">main</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span><span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// TODO Auto-generated method stub</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

public class Firefox_Test {

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		
	}
}
</pre></div></div>
      <p class="number">步骤三：安装和配置WebDriver</p>
      <p>首先下载Java驱动，Selenium WebDriver支持多种编程语言的绑定并且每种语言都有自己的客户端驱动，讲解以Java为编程语言的范例，所以需要下载WebDriver Java Client Driver，官网：</p>
      <p>http://docs.seleniumhq.org/download；</p>
      <p>下载的驱动为zip包格式，解压后包含libs文件夹、两个jar包、一个CHANGELOG文件。</p>
      <p>其次在eclipse的项目中添加引用。具体步骤如下：</p>
      <p>1.在package Explorer用鼠标右键点击项目名称Project1，选择Properties；</p>
      <p>2.选择Java Build Path,在右侧选择Libraries，点击Add External JARs按钮， 选择要selenium-java-2.33.0.jar文件，单击“打开”按钮；</p>
      <p>3.再单击Add External JARs按钮， 选择要selenium-java-2.33.0-srcs.jar文件，单击“打开”按钮；</p>
      <p>4.再单击Add External JARs按钮， 选择Libs文件夹中所有Java的基础框架，单击“打开”按钮；</p>
      <p>5.点击“OK”按钮；</p>
      <p>6.在eclipse的Package Explorer中展开Project1下的Referenced Libraries目录，可以看到刚才引入的包。</p>
      <p class="number">步骤四：书写打开浏览器和关闭浏览器的代码</p>
      <p>创建一个FireFoxDriver的实例，即可打开浏览器，对该实例执行quit方法即可关闭浏览器。代码书写完毕后，需要导入相应的selenium的包，代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li class="bold_code">import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>WebDriver<span class="sh_symbol">;</span></li><li class="bold_code">import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>firefox<span class="sh_symbol">.</span>FirefoxDriver<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> Firefox_Test <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * </span><span class="sh_type">@param</span><span class="sh_comment"> args</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_keyword">static</span> void <span class="sh_function">main</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span><span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// TODO Auto-generated method stub</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 打开FireFox浏览器</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;    WebDriver driver <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FirefoxDriver</span><span class="sh_symbol">();</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="sh_comment">//关闭浏览器</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;    driver<span class="sh_symbol">.</span><span class="sh_function">quit</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

#cold_boldimport org.openqa.selenium.WebDriver;
#cold_boldimport org.openqa.selenium.firefox.FirefoxDriver;

public class Firefox_Test {

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		// TODO Auto-generated method stub
#cold_bold		// 打开FireFox浏览器
#cold_bold	    WebDriver driver = new FirefoxDriver();
#cold_bold	   //关闭浏览器
#cold_bold	    driver.quit();
	}
}
</pre></div></div>
      <p>运行Java代码后，FireFox浏览器被自动打开后自动关闭，其中打开的浏览器右下角有WebDriver标记，这种由Firefox Driver启动的浏览器不加载任何插件，显示效果如下图-1所示：</p>
      <div class="image">
        <img src="./TEST SELENIUM DAY03_w_files/image001.png">
        <p>图－1</p>
      </div>
      <h3>1.4 完整代码</h3>
      <p>本案例中，类Firefox_Test的完整代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>WebDriver<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>firefox<span class="sh_symbol">.</span>FirefoxDriver<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> Firefox_Test <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * </span><span class="sh_type">@param</span><span class="sh_comment"> args</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_keyword">static</span> void <span class="sh_function">main</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span><span class="sh_symbol">[]</span> args<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// TODO Auto-generated method stub</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 打开FireFox浏览器</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    WebDriver driver <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FirefoxDriver</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;   <span class="sh_comment">//关闭浏览器</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    driver<span class="sh_symbol">.</span><span class="sh_function">quit</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;

public class Firefox_Test {

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		// 打开FireFox浏览器
	    WebDriver driver = new FirefoxDriver();
	   //关闭浏览器
	    driver.quit();
	}
}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <a name="case2">
      </a>
      <h2>2 Firefox测试留言簿</h2>
      <h3>2.1 问题</h3>
      <p>使用FireFox Driver测试留言簿(example目录下的message.html程序)，需要实现在留言簿的被测系统中，完成如下操作的步骤：</p>
      <p>（1）在“名字”文本框中输入数据“jack”；</p>
      <p>（2）在“e-mail”文本框中输入数据“jack@163.com”；</p>
      <p>（3）在“留言”文本框中输入数据“Hello,jack!”；</p>
      <p>（4）点击“完成”按钮；</p>
      <p>（5）断言当前网页的标题等于“留言簿”；</p>
      <p>（6）断言“完成”按钮上的文字正确。</p>
      <h3>2.2 方案</h3>
      <p>本案例要求使用Firefox Driver，我们使用Java语言，所以在eclipse环境中完成自动化测试的代码。</p>
      <p>首先需要在已经搭建好的WebDriver工程中，创建一个类，粘贴从Selenium IDE复制的JUnit 4测试用例类的代码，如下操作的步骤：</p>
      <p>（1）在“名字”文本框中输入数据“jack”；</p>
      <p>（2）在“e-mail”文本框中输入数据“jack@163.com”；</p>
      <p>（3）在“留言”文本框中输入数据“Hello,jack!”；</p>
      <p>（4）点击“完成”按钮；</p>
      <p>（5）断言当前网页的标题等于“留言簿”；</p>
      <p>（6）断言“完成”按钮上的文字正确。</p>
      <p>其次，需要修改报名和类名，其中包名要和所在的包一致，类名要和所在的类一致。</p>
      <p>最后，需要确认一下Selenium IDE中是否是绝对路径的网址，确认的方法是将open命令的参数数据从Target列复制，粘贴到浏览器的地址栏中，回车后查看是否可以正确打开网页，如果可以即为绝对路径的网址。</p>
      <p>如果Selenium IDE中是绝对路径的网址，需要将java代码中”baseUrl+“的部分删除，否则，如果为相对路径的URL，需要注意查看baseUrl是否在前面准备好了相应的数据值，baseUrl需要和Selenium IDE中的baseURL值相同。</p>
      <h3>2.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：在Selenium IDE中录制该业务的步骤</p>
      <p>启动Firefox、将指定目录(如E:\Selenium文件夹）下的example.html静态网页拖拽到Firefox中打开该页面，启动Selenium IDE录制如下的操作步骤：</p>
      <p>（1）在“名字”文本框中输入数据“jack”；</p>
      <p>（2）在“e-mail”文本框中输入数据“jack@163.com”；</p>
      <p>（3）在“留言”文本框中输入数据“Hello,jack!”；</p>
      <p>（4）点击“完成”按钮；</p>
      <p>（5）断言当前网页的标题等于“留言簿”；</p>
      <p>（6）断言“完成”按钮上的文字正确。</p>
      <p>在Selenium IDE中运行调试，运行成功的界面如下图-2所示：</p>
      <div class="image">
        <img src="./TEST SELENIUM DAY03_w_files/image002.png">
        <p>图－2</p>
      </div>
      <p class="number">步骤二：将Selenium IDE的整个测试用例复制为JUnit 4的测试用例</p>
      <p>设置允许转换Source视图的代码格式，在Options\Options下设置允许转换的复选框”Enable experimental features“，点击”确定“按钮，界面截图如下图-3所示：</p>
      <div class="image">
        <img src="./TEST SELENIUM DAY03_w_files/image003.png">
        <p>图－3</p>
      </div>
      <p>转换Source视图的代码格式，在Options\Format下选择菜单”Java/ JUnit 4 /WebDriver“，在弹出的提示信息上点击”确定“按钮，界面截图如下图-4到下图-5所示：</p>
      <div class="image">
        <img src="./TEST SELENIUM DAY03_w_files/image004.png">
        <p>图－4</p>
      </div>
      <div class="image">
        <img src="./TEST SELENIUM DAY03_w_files/image005.png">
        <p>图－5</p>
      </div>
      <p>在Source视图中的代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>example<span class="sh_symbol">.</span>tests<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>regex<span class="sh_symbol">.</span>Pattern<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>concurrent<span class="sh_symbol">.</span>TimeUnit<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.</span>Assert<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>hamcrest<span class="sh_symbol">.</span>CoreMatchers<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>firefox<span class="sh_symbol">.</span>FirefoxDriver<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>support<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>Select<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> Untitled <span class="sh_cbracket">{</span></li><li>  <span class="sh_keyword">private</span> WebDriver driver<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> baseUrl<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> boolean acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> StringBuffer verificationErrors <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">StringBuffer</span><span class="sh_symbol">();</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Before</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">setUp</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FirefoxDriver</span><span class="sh_symbol">();</span></li><li>    baseUrl <span class="sh_symbol">=</span> <span class="sh_string">"http://localhost/"</span><span class="sh_symbol">;</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">manage</span><span class="sh_symbol">().</span><span class="sh_function">timeouts</span><span class="sh_symbol">().</span><span class="sh_function">implicitlyWait</span><span class="sh_symbol">(</span><span class="sh_number">30</span><span class="sh_symbol">,</span> TimeUnit<span class="sh_symbol">.</span>SECONDS<span class="sh_symbol">);</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Test</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">testUntitled</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span>baseUrl <span class="sh_symbol">+</span> <span class="sh_string">"file:///E:/Selenium/example/message.html"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack@163.com"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,jack!"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">click</span><span class="sh_symbol">();</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"留言簿"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">getTitle</span><span class="sh_symbol">());</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"完 成"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">getAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @After</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">tearDown</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">quit</span><span class="sh_symbol">();</span></li><li>    <span class="sh_predef_func">String</span> verificationErrorString <span class="sh_symbol">=</span> verificationErrors<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">();</span></li><li>    <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span><span class="sh_string">""</span><span class="sh_symbol">.</span><span class="sh_function">equals</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">))</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_function">fail</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">);</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isElementPresent</span><span class="sh_symbol">(</span>By by<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>by<span class="sh_symbol">);</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoSuchElementException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isAlertPresent</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoAlertPresentException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> <span class="sh_function">closeAlertAndGetItsText</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      Alert alert <span class="sh_symbol">=</span> driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_predef_func">String</span> alertText <span class="sh_symbol">=</span> alert<span class="sh_symbol">.</span><span class="sh_function">getText</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>acceptNextAlert<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">accept</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">dismiss</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span></li><li>      <span class="sh_keyword">return</span> alertText<span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">finally</span> <span class="sh_cbracket">{</span></li><li>      acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.example.tests;

import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

public class Untitled {
  private WebDriver driver;
  private String baseUrl;
  private boolean acceptNextAlert = true;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "http://localhost/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }

  @Test
  public void testUntitled() throws Exception {
    driver.get(baseUrl + "file:///E:/Selenium/example/message.html");
    driver.findElement(By.name("name")).clear();
    driver.findElement(By.name("name")).sendKeys("jack");
    driver.findElement(By.name("e-mail")).clear();
    driver.findElement(By.name("e-mail")).sendKeys("jack@163.com");
    driver.findElement(By.name("comments")).clear();
    driver.findElement(By.name("comments")).sendKeys("Hello,jack!");
    driver.findElement(By.cssSelector("input[type=\"submit\"]")).click();
    assertEquals("留言簿", driver.getTitle());
    assertEquals("完 成", driver.findElement(By.cssSelector("input[type=\"submit\"]")).getAttribute("value"));
  }

  @After
  public void tearDown() throws Exception {
    driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }

  private boolean isElementPresent(By by) {
    try {
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
      return false;
    }
  }

  private boolean isAlertPresent() {
    try {
      driver.switchTo().alert();
      return true;
    } catch (NoAlertPresentException e) {
      return false;
    }
  }

  private String closeAlertAndGetItsText() {
    try {
      Alert alert = driver.switchTo().alert();
      String alertText = alert.getText();
      if (acceptNextAlert) {
        alert.accept();
      } else {
        alert.dismiss();
      }
      return alertText;
    } finally {
      acceptNextAlert = true;
    }
  }
}

</pre></div></div>
      <p class="number">从Source视图中全选（Ctrl+A）后复制（Ctrl+C）代码到剪切板。</p>
      <p class="number">再将Source视图中代码的格式转换回HTML，在提示信息上点击”确定“按钮，如下图-6所示：</p>
      <div class="image">
        <img src="./TEST SELENIUM DAY03_w_files/image006.png">
        <p>图- 6</p>
      </div>
      <p class="number">步骤三：创建一个类，粘贴剪切板上的代码</p>
      <p>在Project1中创建一个包day03，在该day03的package下，在该包下新建名称为FirefoxMessage1的Class，代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> FirefoxMessage1 <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

public class FirefoxMessage1 {

}
</pre></div></div>
      <p>在FirefoxMessage1的Class中，删除所有的步骤，粘贴剪切板上的内容，代码和Selenium IDE的Source视图中一致。</p>
      <p class="number">步骤四：修改调整代码</p>
      <p>在FirefoxMessage1的Class，修改包的声明和所在的包一致（day03），修改类名和所在的类文件名称一致（FirefoxMessage1），代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li class="bold_code">package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>regex<span class="sh_symbol">.</span>Pattern<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>concurrent<span class="sh_symbol">.</span>TimeUnit<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.</span>Assert<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>hamcrest<span class="sh_symbol">.</span>CoreMatchers<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>firefox<span class="sh_symbol">.</span>FirefoxDriver<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>support<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>Select<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li class="bold_code">public <span class="sh_keyword">class</span> FirefoxMessage1 <span class="sh_cbracket">{</span></li><li>  <span class="sh_keyword">private</span> WebDriver driver<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> baseUrl<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> boolean acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> StringBuffer verificationErrors <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">StringBuffer</span><span class="sh_symbol">();</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Before</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">setUp</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FirefoxDriver</span><span class="sh_symbol">();</span></li><li>    baseUrl <span class="sh_symbol">=</span> <span class="sh_string">"http://localhost/"</span><span class="sh_symbol">;</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">manage</span><span class="sh_symbol">().</span><span class="sh_function">timeouts</span><span class="sh_symbol">().</span><span class="sh_function">implicitlyWait</span><span class="sh_symbol">(</span><span class="sh_number">30</span><span class="sh_symbol">,</span> TimeUnit<span class="sh_symbol">.</span>SECONDS<span class="sh_symbol">);</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Test</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">testUntitled</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span>baseUrl <span class="sh_symbol">+</span> <span class="sh_string">"file:///E:/Selenium/example/message.html"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack@163.com"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,jack!"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">click</span><span class="sh_symbol">();</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"留言簿"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">getTitle</span><span class="sh_symbol">());</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"完 成"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">getAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @After</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">tearDown</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">quit</span><span class="sh_symbol">();</span></li><li>    <span class="sh_predef_func">String</span> verificationErrorString <span class="sh_symbol">=</span> verificationErrors<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">();</span></li><li>    <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span><span class="sh_string">""</span><span class="sh_symbol">.</span><span class="sh_function">equals</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">))</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_function">fail</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">);</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isElementPresent</span><span class="sh_symbol">(</span>By by<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>by<span class="sh_symbol">);</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoSuchElementException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isAlertPresent</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoAlertPresentException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> <span class="sh_function">closeAlertAndGetItsText</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      Alert alert <span class="sh_symbol">=</span> driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_predef_func">String</span> alertText <span class="sh_symbol">=</span> alert<span class="sh_symbol">.</span><span class="sh_function">getText</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>acceptNextAlert<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">accept</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">dismiss</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span></li><li>      <span class="sh_keyword">return</span> alertText<span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">finally</span> <span class="sh_cbracket">{</span></li><li>      acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">#cold_boldpackage day03;

import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

#cold_boldpublic class FirefoxMessage1 {
  private WebDriver driver;
  private String baseUrl;
  private boolean acceptNextAlert = true;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "http://localhost/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }

  @Test
  public void testUntitled() throws Exception {
    driver.get(baseUrl + "file:///E:/Selenium/example/message.html");
    driver.findElement(By.name("name")).clear();
    driver.findElement(By.name("name")).sendKeys("jack");
    driver.findElement(By.name("e-mail")).clear();
    driver.findElement(By.name("e-mail")).sendKeys("jack@163.com");
    driver.findElement(By.name("comments")).clear();
    driver.findElement(By.name("comments")).sendKeys("Hello,jack!");
    driver.findElement(By.cssSelector("input[type=\"submit\"]")).click();
    assertEquals("留言簿", driver.getTitle());
    assertEquals("完 成", driver.findElement(By.cssSelector("input[type=\"submit\"]")).getAttribute("value"));
  }

  @After
  public void tearDown() throws Exception {
    driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }

  private boolean isElementPresent(By by) {
    try {
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
      return false;
    }
  }

  private boolean isAlertPresent() {
    try {
      driver.switchTo().alert();
      return true;
    } catch (NoAlertPresentException e) {
      return false;
    }
  }

  private String closeAlertAndGetItsText() {
    try {
      Alert alert = driver.switchTo().alert();
      String alertText = alert.getText();
      if (acceptNextAlert) {
        alert.accept();
      } else {
        alert.dismiss();
      }
      return alertText;
    } finally {
      acceptNextAlert = true;
    }
  }
}
</pre></div></div>
      <p>在FirefoxMessage1的Class，确认Selenium IDE中的open后的参数是绝对路径的URL，所以需要删除JUnit代码中连接baseUrl的部分，代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>regex<span class="sh_symbol">.</span>Pattern<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>concurrent<span class="sh_symbol">.</span>TimeUnit<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.</span>Assert<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>hamcrest<span class="sh_symbol">.</span>CoreMatchers<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>firefox<span class="sh_symbol">.</span>FirefoxDriver<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>support<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>Select<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> FirefoxMessage1 <span class="sh_cbracket">{</span></li><li>  <span class="sh_keyword">private</span> WebDriver driver<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> baseUrl<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> boolean acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> StringBuffer verificationErrors <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">StringBuffer</span><span class="sh_symbol">();</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Before</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">setUp</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FirefoxDriver</span><span class="sh_symbol">();</span></li><li>    baseUrl <span class="sh_symbol">=</span> <span class="sh_string">"http://localhost/"</span><span class="sh_symbol">;</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">manage</span><span class="sh_symbol">().</span><span class="sh_function">timeouts</span><span class="sh_symbol">().</span><span class="sh_function">implicitlyWait</span><span class="sh_symbol">(</span><span class="sh_number">30</span><span class="sh_symbol">,</span> TimeUnit<span class="sh_symbol">.</span>SECONDS<span class="sh_symbol">);</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Test</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">testUntitled</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//因为是绝对路径的url，所以删除baseUrl+的部分</span></li><li class="bold_code">    driver<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"file:///E:/Selenium/example/message.html"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack@163.com"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,jack!"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">click</span><span class="sh_symbol">();</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"留言簿"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">getTitle</span><span class="sh_symbol">());</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"完 成"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">getAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @After</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">tearDown</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">quit</span><span class="sh_symbol">();</span></li><li>    <span class="sh_predef_func">String</span> verificationErrorString <span class="sh_symbol">=</span> verificationErrors<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">();</span></li><li>    <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span><span class="sh_string">""</span><span class="sh_symbol">.</span><span class="sh_function">equals</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">))</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_function">fail</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">);</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isElementPresent</span><span class="sh_symbol">(</span>By by<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>by<span class="sh_symbol">);</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoSuchElementException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isAlertPresent</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoAlertPresentException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> <span class="sh_function">closeAlertAndGetItsText</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      Alert alert <span class="sh_symbol">=</span> driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_predef_func">String</span> alertText <span class="sh_symbol">=</span> alert<span class="sh_symbol">.</span><span class="sh_function">getText</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>acceptNextAlert<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">accept</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">dismiss</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span></li><li>      <span class="sh_keyword">return</span> alertText<span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">finally</span> <span class="sh_cbracket">{</span></li><li>      acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

public class FirefoxMessage1 {
  private WebDriver driver;
  private String baseUrl;
  private boolean acceptNextAlert = true;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "http://localhost/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }

  @Test
  public void testUntitled() throws Exception {
#cold_bold	//因为是绝对路径的url，所以删除baseUrl+的部分
#cold_bold    driver.get("file:///E:/Selenium/example/message.html");
    driver.findElement(By.name("name")).clear();
    driver.findElement(By.name("name")).sendKeys("jack");
    driver.findElement(By.name("e-mail")).clear();
    driver.findElement(By.name("e-mail")).sendKeys("jack@163.com");
    driver.findElement(By.name("comments")).clear();
    driver.findElement(By.name("comments")).sendKeys("Hello,jack!");
    driver.findElement(By.cssSelector("input[type=\"submit\"]")).click();
    assertEquals("留言簿", driver.getTitle());
    assertEquals("完 成", driver.findElement(By.cssSelector("input[type=\"submit\"]")).getAttribute("value"));
  }

  @After
  public void tearDown() throws Exception {
    driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }

  private boolean isElementPresent(By by) {
    try {
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
      return false;
    }
  }

  private boolean isAlertPresent() {
    try {
      driver.switchTo().alert();
      return true;
    } catch (NoAlertPresentException e) {
      return false;
    }
  }

  private String closeAlertAndGetItsText() {
    try {
      Alert alert = driver.switchTo().alert();
      String alertText = alert.getText();
      if (acceptNextAlert) {
        alert.accept();
      } else {
        alert.dismiss();
      }
      return alertText;
    } finally {
      acceptNextAlert = true;
    }
  }
}

</pre></div></div>
      <p class="number">步骤五：运行调试代码</p>
      <p>在该类上点击右键，选择Run As\JUnit Test来运行JUnit测试用例代码，查看被测系统被启动，并且执行相应的自动化测试步骤。</p>
      <p>查看JUnit视图中的运行状态条，如果为绿色，代表运行成功，如果为红色，需要查看Failure Trace确认和定位问题。</p>
      <h3>2.4 完整代码</h3>
      <p>本案例中，FirefoxMessage1类的完整代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>regex<span class="sh_symbol">.</span>Pattern<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>concurrent<span class="sh_symbol">.</span>TimeUnit<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.</span>Assert<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>hamcrest<span class="sh_symbol">.</span>CoreMatchers<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>firefox<span class="sh_symbol">.</span>FirefoxDriver<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>support<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>Select<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> FirefoxMessage1 <span class="sh_cbracket">{</span></li><li>  <span class="sh_keyword">private</span> WebDriver driver<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> baseUrl<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> boolean acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> StringBuffer verificationErrors <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">StringBuffer</span><span class="sh_symbol">();</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Before</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">setUp</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FirefoxDriver</span><span class="sh_symbol">();</span></li><li>    baseUrl <span class="sh_symbol">=</span> <span class="sh_string">"http://localhost/"</span><span class="sh_symbol">;</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">manage</span><span class="sh_symbol">().</span><span class="sh_function">timeouts</span><span class="sh_symbol">().</span><span class="sh_function">implicitlyWait</span><span class="sh_symbol">(</span><span class="sh_number">30</span><span class="sh_symbol">,</span> TimeUnit<span class="sh_symbol">.</span>SECONDS<span class="sh_symbol">);</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Test</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">testUntitled</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//因为是绝对路径的url，所以删除baseUrl+的部分</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"file:///E:/Selenium/example/message.html"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack@163.com"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,jack!"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">click</span><span class="sh_symbol">();</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"留言簿"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">getTitle</span><span class="sh_symbol">());</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"完 成"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">getAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @After</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">tearDown</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">quit</span><span class="sh_symbol">();</span></li><li>    <span class="sh_predef_func">String</span> verificationErrorString <span class="sh_symbol">=</span> verificationErrors<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">();</span></li><li>    <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span><span class="sh_string">""</span><span class="sh_symbol">.</span><span class="sh_function">equals</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">))</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_function">fail</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">);</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isElementPresent</span><span class="sh_symbol">(</span>By by<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>by<span class="sh_symbol">);</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoSuchElementException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isAlertPresent</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoAlertPresentException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> <span class="sh_function">closeAlertAndGetItsText</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      Alert alert <span class="sh_symbol">=</span> driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_predef_func">String</span> alertText <span class="sh_symbol">=</span> alert<span class="sh_symbol">.</span><span class="sh_function">getText</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>acceptNextAlert<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">accept</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">dismiss</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span></li><li>      <span class="sh_keyword">return</span> alertText<span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">finally</span> <span class="sh_cbracket">{</span></li><li>      acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

public class FirefoxMessage1 {
  private WebDriver driver;
  private String baseUrl;
  private boolean acceptNextAlert = true;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "http://localhost/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }

  @Test
  public void testUntitled() throws Exception {
	//因为是绝对路径的url，所以删除baseUrl+的部分
    driver.get("file:///E:/Selenium/example/message.html");
    driver.findElement(By.name("name")).clear();
    driver.findElement(By.name("name")).sendKeys("jack");
    driver.findElement(By.name("e-mail")).clear();
    driver.findElement(By.name("e-mail")).sendKeys("jack@163.com");
    driver.findElement(By.name("comments")).clear();
    driver.findElement(By.name("comments")).sendKeys("Hello,jack!");
    driver.findElement(By.cssSelector("input[type=\"submit\"]")).click();
    assertEquals("留言簿", driver.getTitle());
    assertEquals("完 成", driver.findElement(By.cssSelector("input[type=\"submit

\"]")).getAttribute("value"));
  }

  @After
  public void tearDown() throws Exception {
    driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }

  private boolean isElementPresent(By by) {
    try {
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
      return false;
    }
  }

  private boolean isAlertPresent() {
    try {
      driver.switchTo().alert();
      return true;
    } catch (NoAlertPresentException e) {
      return false;
    }
  }

  private String closeAlertAndGetItsText() {
    try {
      Alert alert = driver.switchTo().alert();
      String alertText = alert.getText();
      if (acceptNextAlert) {
        alert.accept();
      } else {
        alert.dismiss();
      }
      return alertText;
    } finally {
      acceptNextAlert = true;
    }
  }
}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <a name="case3">
      </a>
      <h2>3 Firefox留言簿测试2个用户</h2>
      <h3>3.1 问题</h3>
      <p>在Firefox浏览器测试的一个JUnit的测试用例类中，对留言簿程序测试2个用户：jack和rose，分别放在两个测试方法中完成，要求这两个用户的测试点不同。</p>
      <p>对jack用户，测试步骤和上一案例（Firefox测试留言簿）相同，要求的步骤如下：</p>
      <p>（1）在“名字”文本框中输入数据“jack”；</p>
      <p>（2）在“e-mail”文本框中输入数据“jack@163.com”；</p>
      <p>（3）在“留言”文本框中输入数据“Hello,jack!”；</p>
      <p>（4）点击“完成”按钮；</p>
      <p>（5）断言当前网页的标题等于“留言簿”；</p>
      <p>（6）断言“完成”按钮上的文字正确。</p>
      <p>对rose用户，测试步骤和上一案例（Firefox测试留言簿）不同，要求的步骤如下：</p>
      <p>（1）先将变量un赋值”rose“；</p>
      <p>（2）在“名字”文本框中输入变量un的值；</p>
      <p>（3）在“e-mail”文本框中输入数据“变量un的值@163.com”；</p>
      <p>（4）在“留言”文本框中输入数据“Hello,变量un的值!”；</p>
      <p>（5）断言“e-mail”文本框中的数据为预期值”rose@163.com“；</p>
      <p>（6）断言”留言“文本框中的数据为预期值”Hello,rose!“</p>
      <p>（7）点击“完成”按钮；</p>
      <h3>3.2 方案</h3>
      <p>本案例jack用户的操作和上一案例（Firefox测试留言簿）要求相同，所以我们可以直接复制上一案例的类（FirefoxMessage1.java）；</p>
      <p>然后，需要在新复制的类中增加一个测试方法，在Selenium IDE录制关于rose的步骤，在Selenium IDE中运行调试后，从Selenium IDE复制这些操作步骤到新测试方法中。</p>
      <p>最后，需要运行整个JUnit测试用例或者运行单个测试方法来查看结果。</p>
      <h3>3.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：复制上一案例的JUnit类代码</p>
      <p>在Project1的day03的package下，选中上一案例的JUnit类（FirefoxMessage1.java）,使用右键菜单Copy或者快捷键Ctrl+C来复制类文件，点击选中day03包后，使用右键菜单Paste或Ctrl+V来粘贴该文件，提示类名冲突，修改类名为FirefoxMessage2.java，点击”确定“按钮，如下图-7所示：</p>
      <div class="image">
        <img src="./TEST SELENIUM DAY03_w_files/image007.png">
        <p>图- 7</p>
      </div>
      <p>FirefoxMessage2.java的代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>regex<span class="sh_symbol">.</span>Pattern<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>concurrent<span class="sh_symbol">.</span>TimeUnit<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.</span>Assert<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>hamcrest<span class="sh_symbol">.</span>CoreMatchers<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>firefox<span class="sh_symbol">.</span>FirefoxDriver<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>support<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>Select<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> FirefoxMessage2 <span class="sh_cbracket">{</span></li><li>  <span class="sh_keyword">private</span> WebDriver driver<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> baseUrl<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> boolean acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> StringBuffer verificationErrors <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">StringBuffer</span><span class="sh_symbol">();</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Before</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">setUp</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FirefoxDriver</span><span class="sh_symbol">();</span></li><li>    baseUrl <span class="sh_symbol">=</span> <span class="sh_string">"http://localhost/"</span><span class="sh_symbol">;</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">manage</span><span class="sh_symbol">().</span><span class="sh_function">timeouts</span><span class="sh_symbol">().</span><span class="sh_function">implicitlyWait</span><span class="sh_symbol">(</span><span class="sh_number">30</span><span class="sh_symbol">,</span> TimeUnit<span class="sh_symbol">.</span>SECONDS<span class="sh_symbol">);</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Test</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">testUntitled</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//因为是绝对路径的url，所以删除baseUrl+的部分</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"file:///E:/Selenium/example/message.html"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack@163.com"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,jack!"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">click</span><span class="sh_symbol">();</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"留言簿"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">getTitle</span><span class="sh_symbol">());</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"完 成"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">getAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @After</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">tearDown</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">quit</span><span class="sh_symbol">();</span></li><li>    <span class="sh_predef_func">String</span> verificationErrorString <span class="sh_symbol">=</span> verificationErrors<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">();</span></li><li>    <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span><span class="sh_string">""</span><span class="sh_symbol">.</span><span class="sh_function">equals</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">))</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_function">fail</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">);</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isElementPresent</span><span class="sh_symbol">(</span>By by<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>by<span class="sh_symbol">);</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoSuchElementException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isAlertPresent</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoAlertPresentException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> <span class="sh_function">closeAlertAndGetItsText</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      Alert alert <span class="sh_symbol">=</span> driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_predef_func">String</span> alertText <span class="sh_symbol">=</span> alert<span class="sh_symbol">.</span><span class="sh_function">getText</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>acceptNextAlert<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">accept</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">dismiss</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span></li><li>      <span class="sh_keyword">return</span> alertText<span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">finally</span> <span class="sh_cbracket">{</span></li><li>      acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

public class FirefoxMessage2 {
  private WebDriver driver;
  private String baseUrl;
  private boolean acceptNextAlert = true;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "http://localhost/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }

  @Test
  public void testUntitled() throws Exception {
	//因为是绝对路径的url，所以删除baseUrl+的部分
    driver.get("file:///E:/Selenium/example/message.html");
    driver.findElement(By.name("name")).clear();
    driver.findElement(By.name("name")).sendKeys("jack");
    driver.findElement(By.name("e-mail")).clear();
    driver.findElement(By.name("e-mail")).sendKeys("jack@163.com");
    driver.findElement(By.name("comments")).clear();
    driver.findElement(By.name("comments")).sendKeys("Hello,jack!");
    driver.findElement(By.cssSelector("input[type=\"submit\"]")).click();
    assertEquals("留言簿", driver.getTitle());
    assertEquals("完 成", driver.findElement(By.cssSelector("input[type=\"submit\"]")).getAttribute("value"));
  }

  @After
  public void tearDown() throws Exception {
    driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }

  private boolean isElementPresent(By by) {
    try {
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
      return false;
    }
  }

  private boolean isAlertPresent() {
    try {
      driver.switchTo().alert();
      return true;
    } catch (NoAlertPresentException e) {
      return false;
    }
  }

  private String closeAlertAndGetItsText() {
    try {
      Alert alert = driver.switchTo().alert();
      String alertText = alert.getText();
      if (acceptNextAlert) {
        alert.accept();
      } else {
        alert.dismiss();
      }
      return alertText;
    } finally {
      acceptNextAlert = true;
    }
  }
}
</pre></div></div>
      <p class="number">步骤二：创建一个新的测试方法</p>
      <p>在FirefoxMessage2中修改原来的测试方法名称为test1，并且参照test1，创建一个新的测试方法test2，代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>regex<span class="sh_symbol">.</span>Pattern<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>concurrent<span class="sh_symbol">.</span>TimeUnit<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.</span>Assert<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>hamcrest<span class="sh_symbol">.</span>CoreMatchers<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>firefox<span class="sh_symbol">.</span>FirefoxDriver<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>support<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>Select<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> FirefoxMessage2 <span class="sh_cbracket">{</span></li><li>  <span class="sh_keyword">private</span> WebDriver driver<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> baseUrl<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> boolean acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> StringBuffer verificationErrors <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">StringBuffer</span><span class="sh_symbol">();</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Before</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">setUp</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FirefoxDriver</span><span class="sh_symbol">();</span></li><li>    baseUrl <span class="sh_symbol">=</span> <span class="sh_string">"http://localhost/"</span><span class="sh_symbol">;</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">manage</span><span class="sh_symbol">().</span><span class="sh_function">timeouts</span><span class="sh_symbol">().</span><span class="sh_function">implicitlyWait</span><span class="sh_symbol">(</span><span class="sh_number">30</span><span class="sh_symbol">,</span> TimeUnit<span class="sh_symbol">.</span>SECONDS<span class="sh_symbol">);</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li class="bold_code">  <span class="sh_comment">//测试jack</span></li><li class="bold_code">  @Test</li><li class="bold_code">  <span class="sh_keyword">public</span> void <span class="sh_function">test1</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//因为是绝对路径的url，所以删除baseUrl+的部分</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"file:///E:/Selenium/example/message.html"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack@163.com"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,jack!"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">click</span><span class="sh_symbol">();</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"留言簿"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">getTitle</span><span class="sh_symbol">());</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"完 成"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">getAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>  <span class="sh_cbracket">}</span></li><li>  </li><li class="bold_code">  <span class="sh_comment">//测试rose</span></li><li class="bold_code">  @Test</li><li class="bold_code">  <span class="sh_keyword">public</span> void <span class="sh_function">test2</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;  </li><li class="bold_code">  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @After</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">tearDown</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">quit</span><span class="sh_symbol">();</span></li><li>    <span class="sh_predef_func">String</span> verificationErrorString <span class="sh_symbol">=</span> verificationErrors<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">();</span></li><li>    <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span><span class="sh_string">""</span><span class="sh_symbol">.</span><span class="sh_function">equals</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">))</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_function">fail</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">);</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isElementPresent</span><span class="sh_symbol">(</span>By by<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>by<span class="sh_symbol">);</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoSuchElementException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isAlertPresent</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoAlertPresentException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> <span class="sh_function">closeAlertAndGetItsText</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      Alert alert <span class="sh_symbol">=</span> driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_predef_func">String</span> alertText <span class="sh_symbol">=</span> alert<span class="sh_symbol">.</span><span class="sh_function">getText</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>acceptNextAlert<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">accept</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">dismiss</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span></li><li>      <span class="sh_keyword">return</span> alertText<span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">finally</span> <span class="sh_cbracket">{</span></li><li>      acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

public class FirefoxMessage2 {
  private WebDriver driver;
  private String baseUrl;
  private boolean acceptNextAlert = true;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "http://localhost/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }

#cold_bold  //测试jack
#cold_bold  @Test
#cold_bold  public void test1() throws Exception {
	//因为是绝对路径的url，所以删除baseUrl+的部分
    driver.get("file:///E:/Selenium/example/message.html");
    driver.findElement(By.name("name")).clear();
    driver.findElement(By.name("name")).sendKeys("jack");
    driver.findElement(By.name("e-mail")).clear();
    driver.findElement(By.name("e-mail")).sendKeys("jack@163.com");
    driver.findElement(By.name("comments")).clear();
    driver.findElement(By.name("comments")).sendKeys("Hello,jack!");
    driver.findElement(By.cssSelector("input[type=\"submit\"]")).click();
    assertEquals("留言簿", driver.getTitle());
    assertEquals("完 成", driver.findElement(By.cssSelector("input[type=\"submit

\"]")).getAttribute("value"));
  }
  
#cold_bold  //测试rose
#cold_bold  @Test
#cold_bold  public void test2() throws Exception {
#cold_bold	  
#cold_bold  }

  @After
  public void tearDown() throws Exception {
    driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }

  private boolean isElementPresent(By by) {
    try {
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
      return false;
    }
  }

  private boolean isAlertPresent() {
    try {
      driver.switchTo().alert();
      return true;
    } catch (NoAlertPresentException e) {
      return false;
    }
  }

  private String closeAlertAndGetItsText() {
    try {
      Alert alert = driver.switchTo().alert();
      String alertText = alert.getText();
      if (acceptNextAlert) {
        alert.accept();
      } else {
        alert.dismiss();
      }
      return alertText;
    } finally {
      acceptNextAlert = true;
    }
  }
}
</pre></div></div>
      <p class="number">步骤三：从Selenium IDE复制代码到剪切板</p>
      <p>启动FireFox，打开Message.html，从工具菜单中打开Selenium IDE，录制关于rose的操作步骤：</p>
      <p>（1）先将变量un赋值”rose“；</p>
      <p>（2）在“名字”文本框中输入变量un的值；</p>
      <p>（3）在“e-mail”文本框中输入数据“变量un的值@163.com”；</p>
      <p>（4）在“留言”文本框中输入数据“Hello,变量un的值!”；</p>
      <p>（5）断言“e-mail”文本框中的数据为预期值”rose@163.com“；</p>
      <p>（6）断言”留言“文本框中的数据为预期值”Hello,rose!“</p>
      <p>（7）点击“完成”按钮；</p>
      <p>运行调试后，如下图- 8所示：</p>
      <div class="image">
        <img src="./TEST SELENIUM DAY03_w_files/image008.png">
        <p>图－8</p>
      </div>
      <p>2、在Selenium IDE的菜单Options\Clipboard Format中选择Java/ JUnit 4/ WebDriver的选项，如下图-9所示：</p>
      <div class="image">
        <img src="./TEST SELENIUM DAY03_w_files/image009.png">
        <p>图 - 9</p>
      </div>
      <p>复制测试用例的所有步骤到剪切板。如下图-10所示：</p>
      <div class="image">
        <img src="./TEST SELENIUM DAY03_w_files/image010.png">
        <p>图 - 10</p>
      </div>
      <p class="number">步骤四：粘贴到Java代码中</p>
      <p>在MyEclipse的Java工程的FirefoxMessage2类的test2方法中，粘贴剪切板上的代码，代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>regex<span class="sh_symbol">.</span>Pattern<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>concurrent<span class="sh_symbol">.</span>TimeUnit<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.</span>Assert<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>hamcrest<span class="sh_symbol">.</span>CoreMatchers<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>firefox<span class="sh_symbol">.</span>FirefoxDriver<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>support<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>Select<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> FirefoxMessage2 <span class="sh_cbracket">{</span></li><li>  <span class="sh_keyword">private</span> WebDriver driver<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> baseUrl<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> boolean acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> StringBuffer verificationErrors <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">StringBuffer</span><span class="sh_symbol">();</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Before</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">setUp</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FirefoxDriver</span><span class="sh_symbol">();</span></li><li>    baseUrl <span class="sh_symbol">=</span> <span class="sh_string">"http://localhost/"</span><span class="sh_symbol">;</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">manage</span><span class="sh_symbol">().</span><span class="sh_function">timeouts</span><span class="sh_symbol">().</span><span class="sh_function">implicitlyWait</span><span class="sh_symbol">(</span><span class="sh_number">30</span><span class="sh_symbol">,</span> TimeUnit<span class="sh_symbol">.</span>SECONDS<span class="sh_symbol">);</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_comment">//测试jack</span></li><li>  @Test</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">test1</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//因为是绝对路径的url，所以删除baseUrl+的部分</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"file:///E:/Selenium/example/message.html"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack@163.com"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,jack!"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">click</span><span class="sh_symbol">();</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"留言簿"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">getTitle</span><span class="sh_symbol">());</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"完 成"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">getAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>  <span class="sh_cbracket">}</span></li><li>  </li><li>  <span class="sh_comment">//测试rose</span></li><li>  @Test</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">test2</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li class="bold_code">    driver<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span>baseUrl <span class="sh_symbol">+</span> <span class="sh_string">"file:///E:/Selenium/example/message.html"</span><span class="sh_symbol">);</span></li><li class="bold_code">    <span class="sh_predef_func">String</span> un <span class="sh_symbol">=</span> <span class="sh_string">"rose"</span><span class="sh_symbol">;</span></li><li class="bold_code">    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li class="bold_code">    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span>un<span class="sh_symbol">);</span></li><li class="bold_code">    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li class="bold_code">    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span>un <span class="sh_symbol">+</span> <span class="sh_string">"@163.com"</span><span class="sh_symbol">);</span></li><li class="bold_code">    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li class="bold_code">    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,"</span> <span class="sh_symbol">+</span> un <span class="sh_symbol">+</span> <span class="sh_string">"!"</span><span class="sh_symbol">);</span></li><li class="bold_code">    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"rose@163.com"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span>getAttribute</li><li class="bold_code"></li><li>#<span class="sh_function">cold_bold</span><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li class="bold_code">    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,rose!"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span>getAttribute</li><li class="bold_code"></li><li>#<span class="sh_function">cold_bold</span><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li class="bold_code">    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">click</span><span class="sh_symbol">();</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @After</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">tearDown</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">quit</span><span class="sh_symbol">();</span></li><li>    <span class="sh_predef_func">String</span> verificationErrorString <span class="sh_symbol">=</span> verificationErrors<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">();</span></li><li>    <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span><span class="sh_string">""</span><span class="sh_symbol">.</span><span class="sh_function">equals</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">))</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_function">fail</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">);</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isElementPresent</span><span class="sh_symbol">(</span>By by<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>by<span class="sh_symbol">);</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoSuchElementException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isAlertPresent</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoAlertPresentException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> <span class="sh_function">closeAlertAndGetItsText</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      Alert alert <span class="sh_symbol">=</span> driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_predef_func">String</span> alertText <span class="sh_symbol">=</span> alert<span class="sh_symbol">.</span><span class="sh_function">getText</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>acceptNextAlert<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">accept</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">dismiss</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span></li><li>      <span class="sh_keyword">return</span> alertText<span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">finally</span> <span class="sh_cbracket">{</span></li><li>      acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

public class FirefoxMessage2 {
  private WebDriver driver;
  private String baseUrl;
  private boolean acceptNextAlert = true;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "http://localhost/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }

  //测试jack
  @Test
  public void test1() throws Exception {
	//因为是绝对路径的url，所以删除baseUrl+的部分
    driver.get("file:///E:/Selenium/example/message.html");
    driver.findElement(By.name("name")).clear();
    driver.findElement(By.name("name")).sendKeys("jack");
    driver.findElement(By.name("e-mail")).clear();
    driver.findElement(By.name("e-mail")).sendKeys("jack@163.com");
    driver.findElement(By.name("comments")).clear();
    driver.findElement(By.name("comments")).sendKeys("Hello,jack!");
    driver.findElement(By.cssSelector("input[type=\"submit\"]")).click();
    assertEquals("留言簿", driver.getTitle());
    assertEquals("完 成", driver.findElement(By.cssSelector("input[type=\"submit

\"]")).getAttribute("value"));
  }
  
  //测试rose
  @Test
  public void test2() throws Exception {
#cold_bold    driver.get(baseUrl + "file:///E:/Selenium/example/message.html");
#cold_bold    String un = "rose";
#cold_bold    driver.findElement(By.name("name")).clear();
#cold_bold    driver.findElement(By.name("name")).sendKeys(un);
#cold_bold    driver.findElement(By.name("e-mail")).clear();
#cold_bold    driver.findElement(By.name("e-mail")).sendKeys(un + "@163.com");
#cold_bold    driver.findElement(By.name("comments")).clear();
#cold_bold    driver.findElement(By.name("comments")).sendKeys("Hello," + un + "!");
#cold_bold    assertEquals("rose@163.com", driver.findElement(By.name("e-mail")).getAttribute
#cold_bold
#cold_bold("value"));
#cold_bold    assertEquals("Hello,rose!", driver.findElement(By.name("comments")).getAttribute
#cold_bold
#cold_bold("value"));
#cold_bold    driver.findElement(By.cssSelector("input[type=\"submit\"]")).click();
  }

  @After
  public void tearDown() throws Exception {
    driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }

  private boolean isElementPresent(By by) {
    try {
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
      return false;
    }
  }

  private boolean isAlertPresent() {
    try {
      driver.switchTo().alert();
      return true;
    } catch (NoAlertPresentException e) {
      return false;
    }
  }

  private String closeAlertAndGetItsText() {
    try {
      Alert alert = driver.switchTo().alert();
      String alertText = alert.getText();
      if (acceptNextAlert) {
        alert.accept();
      } else {
        alert.dismiss();
      }
      return alertText;
    } finally {
      acceptNextAlert = true;
    }
  }
}
</pre></div></div>
      <p class="number">步骤五：修改调整代码</p>
      <p>在FirefoxMessage2的Class，确认Selenium IDE中的open后的参数是绝对路径的URL，所以需要删除JUnit代码中test2方法中连接baseUrl的部分，代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>regex<span class="sh_symbol">.</span>Pattern<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>concurrent<span class="sh_symbol">.</span>TimeUnit<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.</span>Assert<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>hamcrest<span class="sh_symbol">.</span>CoreMatchers<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>firefox<span class="sh_symbol">.</span>FirefoxDriver<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>support<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>Select<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> FirefoxMessage2 <span class="sh_cbracket">{</span></li><li>  <span class="sh_keyword">private</span> WebDriver driver<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> baseUrl<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> boolean acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> StringBuffer verificationErrors <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">StringBuffer</span><span class="sh_symbol">();</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Before</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">setUp</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FirefoxDriver</span><span class="sh_symbol">();</span></li><li>    baseUrl <span class="sh_symbol">=</span> <span class="sh_string">"http://localhost/"</span><span class="sh_symbol">;</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">manage</span><span class="sh_symbol">().</span><span class="sh_function">timeouts</span><span class="sh_symbol">().</span><span class="sh_function">implicitlyWait</span><span class="sh_symbol">(</span><span class="sh_number">30</span><span class="sh_symbol">,</span> TimeUnit<span class="sh_symbol">.</span>SECONDS<span class="sh_symbol">);</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_comment">//测试jack</span></li><li>  @Test</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">test1</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//因为是绝对路径的url，所以删除baseUrl+的部分</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"file:///E:/Selenium/example/message.html"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack@163.com"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,jack!"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">click</span><span class="sh_symbol">();</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"留言簿"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">getTitle</span><span class="sh_symbol">());</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"完 成"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">getAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>  <span class="sh_cbracket">}</span></li><li>  </li><li>  <span class="sh_comment">//测试rose</span></li><li>  @Test</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">test2</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//因为是绝对路径的url，所以删除baseUrl+的部分</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;driver<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"file:///E:/Selenium/example/message.html"</span><span class="sh_symbol">);</span></li><li>    <span class="sh_predef_func">String</span> un <span class="sh_symbol">=</span> <span class="sh_string">"rose"</span><span class="sh_symbol">;</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span>un<span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span>un <span class="sh_symbol">+</span> <span class="sh_string">"@163.com"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,"</span> <span class="sh_symbol">+</span> un <span class="sh_symbol">+</span> <span class="sh_string">"!"</span><span class="sh_symbol">);</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"rose@163.com"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span>getAttribute</li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,rose!"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span>getAttribute</li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">click</span><span class="sh_symbol">();</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @After</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">tearDown</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">quit</span><span class="sh_symbol">();</span></li><li>    <span class="sh_predef_func">String</span> verificationErrorString <span class="sh_symbol">=</span> verificationErrors<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">();</span></li><li>    <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span><span class="sh_string">""</span><span class="sh_symbol">.</span><span class="sh_function">equals</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">))</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_function">fail</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">);</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isElementPresent</span><span class="sh_symbol">(</span>By by<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>by<span class="sh_symbol">);</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoSuchElementException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isAlertPresent</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoAlertPresentException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> <span class="sh_function">closeAlertAndGetItsText</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      Alert alert <span class="sh_symbol">=</span> driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_predef_func">String</span> alertText <span class="sh_symbol">=</span> alert<span class="sh_symbol">.</span><span class="sh_function">getText</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>acceptNextAlert<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">accept</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">dismiss</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span></li><li>      <span class="sh_keyword">return</span> alertText<span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">finally</span> <span class="sh_cbracket">{</span></li><li>      acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

public class FirefoxMessage2 {
  private WebDriver driver;
  private String baseUrl;
  private boolean acceptNextAlert = true;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "http://localhost/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }

  //测试jack
  @Test
  public void test1() throws Exception {
	//因为是绝对路径的url，所以删除baseUrl+的部分
    driver.get("file:///E:/Selenium/example/message.html");
    driver.findElement(By.name("name")).clear();
    driver.findElement(By.name("name")).sendKeys("jack");
    driver.findElement(By.name("e-mail")).clear();
    driver.findElement(By.name("e-mail")).sendKeys("jack@163.com");
    driver.findElement(By.name("comments")).clear();
    driver.findElement(By.name("comments")).sendKeys("Hello,jack!");
    driver.findElement(By.cssSelector("input[type=\"submit\"]")).click();
    assertEquals("留言簿", driver.getTitle());
    assertEquals("完 成", driver.findElement(By.cssSelector("input[type=\"submit

\"]")).getAttribute("value"));
  }
  
  //测试rose
  @Test
  public void test2() throws Exception {
#cold_bold	//因为是绝对路径的url，所以删除baseUrl+的部分
#cold_bold	driver.get("file:///E:/Selenium/example/message.html");
    String un = "rose";
    driver.findElement(By.name("name")).clear();
    driver.findElement(By.name("name")).sendKeys(un);
    driver.findElement(By.name("e-mail")).clear();
    driver.findElement(By.name("e-mail")).sendKeys(un + "@163.com");
    driver.findElement(By.name("comments")).clear();
    driver.findElement(By.name("comments")).sendKeys("Hello," + un + "!");
    assertEquals("rose@163.com", driver.findElement(By.name("e-mail")).getAttribute

("value"));
    assertEquals("Hello,rose!", driver.findElement(By.name("comments")).getAttribute

("value"));
    driver.findElement(By.cssSelector("input[type=\"submit\"]")).click();
  }

  @After
  public void tearDown() throws Exception {
    driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }

  private boolean isElementPresent(By by) {
    try {
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
      return false;
    }
  }

  private boolean isAlertPresent() {
    try {
      driver.switchTo().alert();
      return true;
    } catch (NoAlertPresentException e) {
      return false;
    }
  }

  private String closeAlertAndGetItsText() {
    try {
      Alert alert = driver.switchTo().alert();
      String alertText = alert.getText();
      if (acceptNextAlert) {
        alert.accept();
      } else {
        alert.dismiss();
      }
      return alertText;
    } finally {
      acceptNextAlert = true;
    }
  }
}
</pre></div></div>
      <p class="number">步骤六：运行调试代码</p>
      <p>在该类上点击右键，选择Run As\JUnit Test来运行JUnit测试用例代码，查看被测系统被启动2次，并且分别执行jack和rose相应的自动化测试步骤。</p>
      <p>查看JUnit视图中的运行状态条，如果为绿色，代表所有测试方法均运行成功，如果为红色，需要查看Failure Trace确认和定位问题。</p>
      <h3>3.4 完整代码</h3>
      <p>本案例中，FirefoxMessage2 类的完整代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>regex<span class="sh_symbol">.</span>Pattern<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>concurrent<span class="sh_symbol">.</span>TimeUnit<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.</span>Assert<span class="sh_symbol">.*;</span></li><li>import <span class="sh_keyword">static</span> org<span class="sh_symbol">.</span>hamcrest<span class="sh_symbol">.</span>CoreMatchers<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.*;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>firefox<span class="sh_symbol">.</span>FirefoxDriver<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>openqa<span class="sh_symbol">.</span>selenium<span class="sh_symbol">.</span>support<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>Select<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> FirefoxMessage2 <span class="sh_cbracket">{</span></li><li>  <span class="sh_keyword">private</span> WebDriver driver<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> baseUrl<span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> boolean acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>  <span class="sh_keyword">private</span> StringBuffer verificationErrors <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">StringBuffer</span><span class="sh_symbol">();</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @Before</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">setUp</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">FirefoxDriver</span><span class="sh_symbol">();</span></li><li>    baseUrl <span class="sh_symbol">=</span> <span class="sh_string">"http://localhost/"</span><span class="sh_symbol">;</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">manage</span><span class="sh_symbol">().</span><span class="sh_function">timeouts</span><span class="sh_symbol">().</span><span class="sh_function">implicitlyWait</span><span class="sh_symbol">(</span><span class="sh_number">30</span><span class="sh_symbol">,</span> TimeUnit<span class="sh_symbol">.</span>SECONDS<span class="sh_symbol">);</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_comment">//测试jack</span></li><li>  @Test</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">test1</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//因为是绝对路径的url，所以删除baseUrl+的部分</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"file:///E:/Selenium/example/message.html"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"jack@163.com"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,jack!"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">click</span><span class="sh_symbol">();</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"留言簿"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">getTitle</span><span class="sh_symbol">());</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"完 成"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">getAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>  <span class="sh_cbracket">}</span></li><li>  </li><li>  <span class="sh_comment">//测试rose</span></li><li>  @Test</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">test2</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    <span class="sh_comment">//因为是绝对路径的url，所以删除baseUrl+的部分</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">get</span><span class="sh_symbol">(</span><span class="sh_string">"file:///E:/Selenium/example/message.html"</span><span class="sh_symbol">);</span></li><li>    <span class="sh_predef_func">String</span> un <span class="sh_symbol">=</span> <span class="sh_string">"rose"</span><span class="sh_symbol">;</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span>un<span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span>un <span class="sh_symbol">+</span> <span class="sh_string">"@163.com"</span><span class="sh_symbol">);</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">clear</span><span class="sh_symbol">();</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span><span class="sh_function">sendKeys</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,"</span> <span class="sh_symbol">+</span> un <span class="sh_symbol">+</span> <span class="sh_string">"!"</span><span class="sh_symbol">);</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"rose@163.com"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"e-mail"</span><span class="sh_symbol">)).</span>getAttribute</li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>    <span class="sh_function">assertEquals</span><span class="sh_symbol">(</span><span class="sh_string">"Hello,rose!"</span><span class="sh_symbol">,</span> driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">name</span><span class="sh_symbol">(</span><span class="sh_string">"comments"</span><span class="sh_symbol">)).</span>getAttribute</li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">(</span><span class="sh_string">"value"</span><span class="sh_symbol">));</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>By<span class="sh_symbol">.</span><span class="sh_function">cssSelector</span><span class="sh_symbol">(</span><span class="sh_string">"input[type=</span><span class="sh_specialchar">\"</span><span class="sh_string">submit</span><span class="sh_specialchar">\"</span><span class="sh_string">]"</span><span class="sh_symbol">)).</span><span class="sh_function">click</span><span class="sh_symbol">();</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  @After</li><li>  <span class="sh_keyword">public</span> void <span class="sh_function">tearDown</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>    driver<span class="sh_symbol">.</span><span class="sh_function">quit</span><span class="sh_symbol">();</span></li><li>    <span class="sh_predef_func">String</span> verificationErrorString <span class="sh_symbol">=</span> verificationErrors<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">();</span></li><li>    <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span><span class="sh_string">""</span><span class="sh_symbol">.</span><span class="sh_function">equals</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">))</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_function">fail</span><span class="sh_symbol">(</span>verificationErrorString<span class="sh_symbol">);</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isElementPresent</span><span class="sh_symbol">(</span>By by<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">findElement</span><span class="sh_symbol">(</span>by<span class="sh_symbol">);</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoSuchElementException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> boolean <span class="sh_function">isAlertPresent</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>NoAlertPresentException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>      <span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>  <span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> <span class="sh_function">closeAlertAndGetItsText</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>    <span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>      Alert alert <span class="sh_symbol">=</span> driver<span class="sh_symbol">.</span><span class="sh_function">switchTo</span><span class="sh_symbol">().</span><span class="sh_function">alert</span><span class="sh_symbol">();</span></li><li>      <span class="sh_predef_func">String</span> alertText <span class="sh_symbol">=</span> alert<span class="sh_symbol">.</span><span class="sh_function">getText</span><span class="sh_symbol">();</span></li><li>      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>acceptNextAlert<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">accept</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>        alert<span class="sh_symbol">.</span><span class="sh_function">dismiss</span><span class="sh_symbol">();</span></li><li>      <span class="sh_cbracket">}</span></li><li>      <span class="sh_keyword">return</span> alertText<span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span> <span class="sh_keyword">finally</span> <span class="sh_cbracket">{</span></li><li>      acceptNextAlert <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>    <span class="sh_cbracket">}</span></li><li>  <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

public class FirefoxMessage2 {
  private WebDriver driver;
  private String baseUrl;
  private boolean acceptNextAlert = true;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "http://localhost/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }

  //测试jack
  @Test
  public void test1() throws Exception {
	//因为是绝对路径的url，所以删除baseUrl+的部分
    driver.get("file:///E:/Selenium/example/message.html");
    driver.findElement(By.name("name")).clear();
    driver.findElement(By.name("name")).sendKeys("jack");
    driver.findElement(By.name("e-mail")).clear();
    driver.findElement(By.name("e-mail")).sendKeys("jack@163.com");
    driver.findElement(By.name("comments")).clear();
    driver.findElement(By.name("comments")).sendKeys("Hello,jack!");
    driver.findElement(By.cssSelector("input[type=\"submit\"]")).click();
    assertEquals("留言簿", driver.getTitle());
    assertEquals("完 成", driver.findElement(By.cssSelector("input[type=\"submit

\"]")).getAttribute("value"));
  }
  
  //测试rose
  @Test
  public void test2() throws Exception {
    //因为是绝对路径的url，所以删除baseUrl+的部分
    driver.get("file:///E:/Selenium/example/message.html");
    String un = "rose";
    driver.findElement(By.name("name")).clear();
    driver.findElement(By.name("name")).sendKeys(un);
    driver.findElement(By.name("e-mail")).clear();
    driver.findElement(By.name("e-mail")).sendKeys(un + "@163.com");
    driver.findElement(By.name("comments")).clear();
    driver.findElement(By.name("comments")).sendKeys("Hello," + un + "!");
    assertEquals("rose@163.com", driver.findElement(By.name("e-mail")).getAttribute

("value"));
    assertEquals("Hello,rose!", driver.findElement(By.name("comments")).getAttribute

("value"));
    driver.findElement(By.cssSelector("input[type=\"submit\"]")).click();
  }

  @After
  public void tearDown() throws Exception {
    driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }

  private boolean isElementPresent(By by) {
    try {
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
      return false;
    }
  }

  private boolean isAlertPresent() {
    try {
      driver.switchTo().alert();
      return true;
    } catch (NoAlertPresentException e) {
      return false;
    }
  }

  private String closeAlertAndGetItsText() {
    try {
      Alert alert = driver.switchTo().alert();
      String alertText = alert.getText();
      if (acceptNextAlert) {
        alert.accept();
      } else {
        alert.dismiss();
      }
      return alertText;
    } finally {
      acceptNextAlert = true;
    }
  }
}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <a name="case4">
      </a>
      <h2>4 留言簿测试套件</h2>
      <h3>4.1 问题</h3>
      <p>使用JUnit提供的测试套件将留言簿程序的以上两个案例的测试用例类的代码批量运行。</p>
      <p>（1）案例一：Firefox测试留言簿（FirefoxMessage1.java）；</p>
      <p>（2）案例二：Firefox留言簿测试2个用户（FirefoxMessage2.java）。</p>
      <h3>4.2 方案</h3>
      <p>测试套件可以将多个测试用例合在一起测试，将相关的测试用例合成一个测试套件，每次新版本代码发布后，如果需要做回归测试，只需要运行测试套件就可以,不需要运行每一个测试用例。</p>
      <p>本案例要求使用JUnit 4提供的测试套件完成代码的批量运行，需要使用JUnit测试套件的模板，将多个测试用例使用addTest方法加入到测试套件中，再将需要导入的类进行导入操作即可，运行测试套件就可以对该测试套件内的测试用例实现批量运行。</p>
      <p>JUnit 4测试套件的模板如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> AllTests <span class="sh_cbracket">{</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">static</span> Test <span class="sh_function">suite</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>TestSuite suite <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">TestSuite</span><span class="sh_symbol">(</span><span class="sh_string">"Test for day01"</span><span class="sh_symbol">);</span></li><li><span class="sh_comment">//$JUnit-BEGIN$</span></li><li>suite<span class="sh_symbol">.</span><span class="sh_function">addTest</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JUnit4TestAdapter</span><span class="sh_symbol">(</span>Test1<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">));</span></li><li>suite<span class="sh_symbol">.</span><span class="sh_function">addTest</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JUnit4TestAdapter</span><span class="sh_symbol">(</span>Test2<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">));</span></li><li>suite<span class="sh_symbol">.</span><span class="sh_function">addTest</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JUnit4TestAdapter</span><span class="sh_symbol">(</span>Test3<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">));</span></li><li><span class="sh_comment">//$JUnit-END$</span></li><li><span class="sh_keyword">return</span> suite<span class="sh_symbol">;</span></li><li><span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">public class AllTests {
public static Test suite() {
TestSuite suite = new TestSuite("Test for day01");
//$JUnit-BEGIN$
suite.addTest(new JUnit4TestAdapter(Test1.class));
suite.addTest(new JUnit4TestAdapter(Test2.class));
suite.addTest(new JUnit4TestAdapter(Test3.class));
//$JUnit-END$
return suite;
}
}
</pre></div></div>
      <h3>4.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：创建一个测试套件类，粘贴测试套件模板的代码</p>
      <p>在Project1的day03的package下，在该包下新建名称为AllTests的Class，代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> AllTests <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

public class AllTests {

}
</pre></div></div>
      <p>在AllTests的Class中，删除原有的代码，只保留第一行关于包的声明部分（package day03;），粘贴JUnit 4测试套件的模板，代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li class="bold_code">public <span class="sh_keyword">class</span> AllTests <span class="sh_cbracket">{</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_keyword">static</span> Test <span class="sh_function">suite</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestSuite suite <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">TestSuite</span><span class="sh_symbol">(</span><span class="sh_string">"Test for day01"</span><span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//$JUnit-BEGIN$</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;suite<span class="sh_symbol">.</span><span class="sh_function">addTest</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JUnit4TestAdapter</span><span class="sh_symbol">(</span>Test1<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">));</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;suite<span class="sh_symbol">.</span><span class="sh_function">addTest</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JUnit4TestAdapter</span><span class="sh_symbol">(</span>Test2<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">));</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;suite<span class="sh_symbol">.</span><span class="sh_function">addTest</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JUnit4TestAdapter</span><span class="sh_symbol">(</span>Test3<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">));</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//$JUnit-END$</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> suite<span class="sh_symbol">;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li class="bold_code"><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

#cold_boldpublic class AllTests {
#cold_bold	public static Test suite() {
#cold_bold		TestSuite suite = new TestSuite("Test for day01");
#cold_bold		//$JUnit-BEGIN$
#cold_bold		suite.addTest(new JUnit4TestAdapter(Test1.class));
#cold_bold		suite.addTest(new JUnit4TestAdapter(Test2.class));
#cold_bold		suite.addTest(new JUnit4TestAdapter(Test3.class));
#cold_bold		//$JUnit-END$
#cold_bold		return suite;
#cold_bold	}
#cold_bold}
</pre></div></div>
      <p class="number">步骤二：加入测试用例</p>
      <p>将两个测试用例类加入到此测试套件中，需要将原模板代码中的Test1修改为待加入的第一个测试用例FirefoxMessage1，再将Test2修改为FirefoxMessage2，删除Test3行。</p>
      <p>再倒入junit.framework包下的相关测试类，代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li class="bold_code">import junit<span class="sh_symbol">.</span>framework<span class="sh_symbol">.</span>JUnit4TestAdapter<span class="sh_symbol">;</span></li><li class="bold_code">import junit<span class="sh_symbol">.</span>framework<span class="sh_symbol">.</span>Test<span class="sh_symbol">;</span></li><li class="bold_code">import junit<span class="sh_symbol">.</span>framework<span class="sh_symbol">.</span>TestSuite<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> AllTests <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_keyword">static</span> Test <span class="sh_function">suite</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestSuite suite <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">TestSuite</span><span class="sh_symbol">(</span><span class="sh_string">"Test for day01"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//$JUnit-BEGIN$</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;suite<span class="sh_symbol">.</span><span class="sh_function">addTest</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JUnit4TestAdapter</span><span class="sh_symbol">(</span>FirefoxMessage1<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">));</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;suite<span class="sh_symbol">.</span><span class="sh_function">addTest</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JUnit4TestAdapter</span><span class="sh_symbol">(</span>FirefoxMessage2<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//$JUnit-END$</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> suite<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

#cold_boldimport junit.framework.JUnit4TestAdapter;
#cold_boldimport junit.framework.Test;
#cold_boldimport junit.framework.TestSuite;

public class AllTests {
	public static Test suite() {
		TestSuite suite = new TestSuite("Test for day01");
		//$JUnit-BEGIN$
#cold_bold		suite.addTest(new JUnit4TestAdapter(FirefoxMessage1.class));
#cold_bold		suite.addTest(new JUnit4TestAdapter(FirefoxMessage2.class));
		//$JUnit-END$
		return suite;
	}
}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p class="number">步骤三：运行调试代码</p>
      <p>在该类上点击右键，选择Run As\JUnit Test来运行JUnit测试套件代码，查看被测系统被启动和关闭3次，其中第一次是针对FirefoxMessage1运行jack数据的测试，后两次是针对FirefoxMessage2运行jack和rose的数据，并且每次都能执行相应的自动化测试步骤。</p>
      <p>查看JUnit视图中的运行状态条，如果为绿色，代表该测试套件的所有测试用例中所有测试方法均运行成功，如果为红色，需要查看Failure Trace确认和定位问题。</p>
      <h3>4.4 完整代码</h3>
      <p>本案例中，AllTests类的完整代码如下所示：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package day03<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import junit<span class="sh_symbol">.</span>framework<span class="sh_symbol">.</span>JUnit4TestAdapter<span class="sh_symbol">;</span></li><li>import junit<span class="sh_symbol">.</span>framework<span class="sh_symbol">.</span>Test<span class="sh_symbol">;</span></li><li>import junit<span class="sh_symbol">.</span>framework<span class="sh_symbol">.</span>TestSuite<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> AllTests <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_keyword">static</span> Test <span class="sh_function">suite</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestSuite suite <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">TestSuite</span><span class="sh_symbol">(</span><span class="sh_string">"Test for day01"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//$JUnit-BEGIN$</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;suite<span class="sh_symbol">.</span><span class="sh_function">addTest</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JUnit4TestAdapter</span><span class="sh_symbol">(</span>FirefoxMessage1<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;suite<span class="sh_symbol">.</span><span class="sh_function">addTest</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">JUnit4TestAdapter</span><span class="sh_symbol">(</span>FirefoxMessage2<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//$JUnit-END$</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> suite<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package day03;

import junit.framework.JUnit4TestAdapter;
import junit.framework.Test;
import junit.framework.TestSuite;

public class AllTests {
	public static Test suite() {
		TestSuite suite = new TestSuite("Test for day01");
		//$JUnit-BEGIN$
		suite.addTest(new JUnit4TestAdapter(FirefoxMessage1.class));
		suite.addTest(new JUnit4TestAdapter(FirefoxMessage2.class));
		//$JUnit-END$
		return suite;
	}
}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://tts.tmooc.cn/ttsPage/TESTING/TSDTN201801/SELENIUM/DAY03/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
    </div>
  
</body></html>